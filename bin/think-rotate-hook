#!/bin/bash
# Taken from think-dock-hook (Copyright © 2012-2013 Martin Ueding <dev@martin-ueding.de>)
# Changes Copyright © 2013 Jim Turner <jturner314@gmail.com>

TEXTDOMAIN=think-rotate

set -e
set -u

# Find the user who is currently logged in on the primary screen.
user="$(who -u | grep -F '(:0)' | head -n 1 | awk '{print $1}')"

logger -t think-rotate -- "Using user $user."

case "$4" in
	00000001)
		setto=right
		;;
	00000000)
		setto=normal
		;;
esac

su -c "DISPLAY=:0.0 kdialog=false /usr/bin/think-rotate $setto" --login "$user" &

disown
